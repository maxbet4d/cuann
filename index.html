<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>MAXBET4D - Full Web Firebase</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBC8UXFcrJaxMsJsTQgnqaaNvgsAVz0vOE",
      authDomain: "ariptoto-web.firebaseapp.com",
      projectId: "ariptoto-web",
      storageBucket: "ariptoto-web.appspot.com",
      messagingSenderId: "129200594109",
      appId: "1:129200594109:web:50f7f4ce89a384211b2bd4"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    let currentUser = null;
  </script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0a0f1c;
      color: white;
      overflow-x: hidden;
      touch-action: manipulation;
      -ms-touch-action: manipulation;
    }

    header {
      background: #111a33;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      flex-wrap: wrap;
    }

    .logo {
      display: flex;
      align-items: center;
      flex-shrink: 0;
    }

    .logo img {
      height: 100px;
      width: auto;
      display: block;
    }

    .header-right {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 8px;
      flex-grow: 1;
    }

    .login-form {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .login-form input {
      padding: 6px;
      border-radius: 5px;
      border: none;
      outline: none;
      min-width: 100px;
      max-width: 150px;
      flex: 1 1 auto;
    }

    .login-form button {
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      max-width: 120px;
      flex: 1 1 auto;
    }

    .btn-login {
      background: #ff4444;
      color: white;
    }

    .btn-daftar {
      background: #00cc66;
      color: white;
    }

    .btn-wa {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 16px;
      background: #25D366;
      color: white;
      font-weight: bold;
      border-radius: 6px;
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 14px;
    }

    .btn-wa:hover {
      background: #1ebe5d;
      transform: scale(1.05);
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        align-items: center;
      }

      .header-right {
        width: 100%;
        align-items: center;
      }

      .login-form {
        flex-direction: column;
        width: 100%;
        gap: 8px;
      }

      .login-form input,
      .login-form button {
        width: 100%;
        max-width: 100%;
      }

      .btn-wa {
        width: 100%;
        text-align: center;
      }

      .logo img {
        height: 80px;
      }
    }

    /* Tambahan animasi & style lainnya tetap ada nanti */
  </style>
</head>

<body>
  <!-- HOME PAGE -->
  <div id="home" class="page active">
    <header>
      <div class="logo">
        <img src="maxbet.png" alt="MAXBET Logo" />
      </div>
      <div class="header-right">
        <form class="login-form">
          <input type="text" id="userLogin" placeholder="User ID" />
          <input type="password" id="passLogin" placeholder="Kata Sandi" />
          <button type="button" class="btn-login" onclick="login()">Login</button>
          <button type="button" class="btn-daftar" onclick="showPage('daftar')">Daftar</button>
        </form>
        <a href="https://wa.me/6282128009210" target="_blank" class="btn-wa">
          ðŸ’¬ Hubungi WhatsApp / Live Chat
        </a>
      </div>
    </header>
    <!-- Banner -->
    <section style="padding: 20px; text-align: center;">
      <h1>Selamat Datang di MAXBET4D</h1>
      <p>Website togel terpercaya dan terbaik di Indonesia.</p>
      <img src="banner.jpg" alt="Promo Banner" style="width: 100%; max-width: 800px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.4);" />
    </section>
  </div>

  <!-- FORM DAFTAR -->
  <div id="daftar" class="page" style="display:none;">
    <section style="padding: 20px;">
      <h2>Form Pendaftaran</h2>
      <form id="registerForm" onsubmit="event.preventDefault(); register();">
        <input type="text" id="regUser" placeholder="User ID" required />
        <input type="password" id="regPass" placeholder="Kata Sandi" required />
        <input type="text" id="regRef" placeholder="Kode Referal (opsional)" />
        <button type="submit" class="btn-daftar">Daftar Sekarang</button>
        <button type="button" onclick="showPage('home')">Kembali</button>
      </form>
    </section>
  </div>

  <!-- USER AREA -->
  <div id="userPage" class="page" style="display:none;">
    <section style="padding: 20px;">
      <h2>Selamat Datang, <span id="usernameDisplay"></span></h2>
      <p>Saldo Anda: <span id="saldoDisplay">0</span></p>
      <button onclick="showPage('deposit')">Deposit</button>
      <button onclick="showPage('withdraw')">Withdraw</button>
      <button onclick="logout()">Logout</button>
    </section>
  </div>
  <!-- DEPOSIT -->
  <div id="deposit" class="page" style="display:none;">
    <section style="padding: 20px;">
      <h2>Deposit</h2>
      <p>Silakan transfer ke rekening kami:</p>
      <p><strong>BCA: 1234567890 a.n. MAXBET4D</strong></p>
      <input type="number" id="depositAmount" placeholder="Jumlah Deposit" required />
      <button onclick="deposit()">Kirim</button>
      <button onclick="showPage('userPage')">Kembali</button>
    </section>
  </div>

  <!-- WITHDRAW -->
  <div id="withdraw" class="page" style="display:none;">
    <section style="padding: 20px;">
      <h2>Withdraw</h2>
      <input type="number" id="withdrawAmount" placeholder="Jumlah Withdraw" required />
      <button onclick="withdraw()">Kirim</button>
      <button onclick="showPage('userPage')">Kembali</button>
    </section>
  </div>

  <!-- FIREBASE SCRIPT -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyBC8UXFcrJaxMsJsTQgnqaaNvgsAVz0vOE",
      authDomain: "ariptoto-web.firebaseapp.com",
      projectId: "ariptoto-web",
      storageBucket: "ariptoto-web.appspot.com",
      messagingSenderId: "129200594109",
      appId: "1:129200594109:web:50f7f4ce89a384211b2bd4"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    let currentUser = null;

    // Page Switching
    function showPage(id) {
      document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
      document.getElementById(id).style.display = 'block';
    }

    // Login
    async function login() {
      const username = document.getElementById('loginUser').value.trim();
      const password = document.getElementById('loginPass').value.trim();
      if (!username || !password) return alert("Isi semua field");

      const userRef = db.collection('users').doc(username);
      const doc = await userRef.get();
      if (!doc.exists || doc.data().password !== password) {
        return alert("Login gagal");
      }

      currentUser = { username, ...doc.data() };
      document.getElementById('usernameDisplay').innerText = username;
      document.getElementById('saldoDisplay').innerText = currentUser.balance || 0;
      showPage('userPage');
    }

    // Register
    async function register() {
      const username = document.getElementById('regUser').value.trim();
      const password = document.getElementById('regPass').value.trim();
      const referal = document.getElementById('regRef').value.trim();
      if (!username || !password) return alert("Isi semua field");

      const doc = await db.collection('users').doc(username).get();
      if (doc.exists) return alert("User sudah terdaftar");

      await db.collection('users').doc(username).set({
        password,
        balance: 0,
        referal,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      alert("Registrasi berhasil!");
      showPage('home');
    }

    // Logout
    function logout() {
      currentUser = null;
      alert("Logout berhasil");
      showPage('home');
    }

    // Deposit
    async function deposit() {
      if (!currentUser) return alert("Login dulu");
      const amount = parseInt(document.getElementById('depositAmount').value);
      if (!amount || amount <= 0) return alert("Nominal tidak valid");

      await db.collection('deposits').add({
        user: currentUser.username,
        amount,
        status: 'pending',
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      alert("Deposit dikirim. Tunggu konfirmasi admin.");
      showPage('userPage');
    }

    // Withdraw
    async function withdraw() {
      if (!currentUser) return alert("Login dulu");
      const amount = parseInt(document.getElementById('withdrawAmount').value);
      if (!amount || amount <= 0) return alert("Nominal tidak valid");
      if (amount > (currentUser.balance || 0)) return alert("Saldo tidak cukup");

      await db.collection('withdraws').add({
        user: currentUser.username,
        amount,
        status: 'pending',
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      alert("Withdraw dikirim. Tunggu konfirmasi admin.");
      showPage('userPage');
    }
  </script>
</body>
</html>

